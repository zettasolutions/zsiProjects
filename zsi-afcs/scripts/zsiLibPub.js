var ud="undefined",isUD=function(e){return typeof e===ud},zsi={__monitorAjaxResponse:function(){function e(){setTimeout(function(){typeof zsi_request_count!==ud&&zsi_request_count<=0&&(zsi.ShowHideProgressWindow(!1),zsi_request_count=0)},100)}$(document).ajaxStart(function(){}),$(document).ajaxSend(function(e,t,n){typeof zsi_request_count===ud&&(zsi_request_count=0);for(var i=zsi.config.excludeAjaxWatch,a=0;a<i.length;a++)if(zsi.strExist(n.url,i[a]))return;zsi_request_count++,zsi.ShowHideProgressWindow(!0)}),$(document).ajaxComplete(function(t,n,i){typeof zsi_request_count!==ud&&(zsi_request_count--,zsi_request_count<=0&&e())}),$(document).ajaxSuccess(function(e,t,n){}),$(document).ajaxError(function(t,n,i){var a=typeof zsi.config.errorUpdateURL!==ud?zsi.config.errorUpdateURL:"",s="No error URL found. Error not submitted.",o={};return o.event=t,o.request=n,o.settings=i,e(),a&&zsi.strExist(i.url,a)?(console.log("url: "+i.url),!1):(typeof zsi.config.sqlConsoleName===ud||!zsi.strExist(i.url,zsi.config.sqlConsoleName))&&void(""===n.responseText?(console.log("zsi.Ajax.Request Status = %cNo Data (warning!) %c, url: "+i.url,"color:orange;","color:#000;"),""===a?console.log(s):$.post(a,{p:"error_logs_upd @error_type='W' @error_msg='No Response Data' @page_url='"+escape(i.url)+"'"},function(){console.log("Warning submited.")})):(console.log("zsi.Ajax.Request Status = Failed %c, url: "+i.url,"color:red;","color:#000;"),console.log(o),i.retryCounter||(i.retryCounter=0),i.retryCounter++,i.retryCounter<=0&&setTimeout(function(){console.log("retry#:"+i.retryCounter),$.ajax(i)},1e3),i.retryCounter>0&&(console.log("retry limit is reached"),""===a?(console.log(s),zsi.ShowErrorWindow()):$.post(a,{p:"error_logs_upd @error_type='E',@error_msg='"+escape(n.responseText)+"',@page_url='"+escape(i.url)+"'"},function(){console.log("Error submited."),zsi.ShowErrorWindow()}))))})},__setExtendedJqFunctions:function(){$.fn.addColResize=function(e){if(!this.length)return console.error("Target not found."),!1;if(!this.parent().hasClass("zTable"))return console.error("zTable div parent is not found."),!1;var t=isUD(e)?this[0].offsetWidth:isUD(e.width)?this[0].offsetWidth:e.width,n=isUD(e)?this[0].offsetHeight:isUD(e.height)?this[0].offsetHeight:e.height,i=this.html().indexOf("span=")>0,a=this.closest(".zTable"),s=this.find("thead"),o=(s.find("tr:last-child th"),this.find("tbody")),r=new zsi.easyJsTemplateWriter,l=[],d=isUD(e.colWidth)?[]:e.colWidth;isUD(e.colWidth)&&$.each(e.dataRows,function(e,t){d.push(t.width)});var c=d.length;if(i){for(var u=s.find("tr"),h=o.find("tr"),f=u.length,p=h.length,m=[],v=0,g=0;g<f;g++){for(var y=u.eq(g).find("th"),w=y.length,b={},C=[],x=0,z=0;z<w;z++){var _=y.eq(z),k=0;if(isUD(_.attr("colspan"))){if(x+1-1<c&&x++,v!==g)for(I=0;I<m.length;I++)for(S=0;S<m[I].length;S++){(E=m[I][S]).i==x-1&&E.rowspan>0&&(E.rowspan--,x+1-1<c&&x++)}x-1<c&&(k=parseInt(d[x-1],10)),isUD(_.attr("rowspan"))||C.push({i:x-1,rowspan:parseInt(_.attr("rowspan"),10)-1})}else{for(var N=(O=parseInt(_.attr("colspan"),10))-1,T=1;T<=O;T++)b[++x-1]=_;for(var D=N,R=x-1-N;D>=0&&R<c;D--,R++){if(v!==g)for(var I=0;I<m.length;I++)for(var S=0;S<m[I].length;S++){(E=m[I][S]).i==R&&E.rowspan>0&&(E.rowspan--,x+1-1<c&&x++)}x-1<c&&(k+=parseInt(d[R],10))}if(!isUD(_.attr("rowspan")))for(D=N,R=x-1-N;D>=0&&R<c;D--,R++)C.push({i:R,rowspan:parseInt(_.attr("rowspan"),10)-1})}_.css({"min-width":k,width:k}),b[x-1]=_}m.push(C),l.push(b),v=g}m=[],v=0;for(g=0;g<p;g++){var P=h.eq(g).find("td"),L=P.length;for(b={},C=[],x=0,z=0;z<L;z++){var U=P.eq(z);k=0;if(isUD(U.attr("colspan"))){if(x+1-1<c&&x++,v!==g)for(I=0;I<m.length;I++)for(S=0;S<m[I].length;S++){(E=m[I][S]).i==x-1&&E.rowspan>0&&(E.rowspan--,x+1-1<c&&x++)}x-1<c&&(k=parseInt(d[x-1],10)),isUD(U.attr("rowspan"))||C.push({i:x-1,rowspan:parseInt(U.attr("rowspan"),10)-1})}else{var O;for(N=(O=parseInt(U.attr("colspan"),10))-1,T=1;T<=O;T++)b[++x-1]=U;for(D=N,R=x-1-N;D>=0&&R<c;D--,R++){if(v!==g)for(var I=0;I<m.length;I++)for(var S=0;S<m[I].length;S++){var E;(E=m[I][S]).i==R&&E.rowspan>0&&(E.rowspan--,x+1-1<c&&x++)}x-1<c&&(k+=parseInt(d[R],10))}if(!isUD(U.attr("rowspan")))for(D=N,R=x-1-N;D>=0&&R<c;D--,R++)C.push({i:R,rowspan:parseInt(U.attr("rowspan"),10)-1})}U.css({"min-width":k,width:k}),b[x-1]=U}m.push(C),l.push(b),v=g}}else $.each(d,function(e,t){var n=e+1;a.find("th:nth-child("+n+") , td:nth-child("+n+")").attr({colindex:e}).css({width:t,"min-width":t})});var j=a.find(".crPanel");if(0===j.length){var q=[],H=0;r.new().div({class:"crPanel",style:"left:"+this[0].offsetLeft+"px; top:"+this[0].offsetTop+"px;"}).in(),$.each(d,function(e,i){H+=i,q.push({x:H,width:i}),r.div({class:H>=t?"cr hidden":"cr",style:"left:"+H+"px; height : "+(n-17)+"px; top:0;"})}),a.append(r.html());var A,B,V,W,M,G,F,J=(j=a.find(".crPanel")).find(".cr"),Y=q.length,X=this[0].offsetLeft;o.on("scroll",function(){var e=X-o.scrollLeft();j.css({left:e+"px"});for(var n=0;n<Y;n++){var i=q[n].x+e;i>=t||i<=X?$(J[n]).addClass("hidden"):$(J[n]).removeClass("hidden")}}),J.off("mousedown").on("mousedown",function(e){A=$(this),B=A.index(),V=q[B],W=0===B?25:q[B-1].x+25,M=e.pageX,F=e.pageX,G=V.x,A.addClass("active"),a.addClass("noSelect")}),a.off("mousemove").on("mousemove",function(e){if(!isUD(A)&&"cr"!==e.target.classList[0]){var t=e.pageX-$(this).offset().left+o.scrollLeft();t>W&&(A.css({left:t}),G=t,F=e.pageX)}}),$(window).on("mouseup",function(e){if(!isUD(A)){A.removeClass("active"),a.removeClass("noSelect");var r=F>=M?V.width+(G-V.x):V.width-(V.x-G);if(V.width=r,i)for(var d=0;d<l.length;d++){var c=l[d];for(var u in c)B===parseInt(u)&&c[u].css({width:r,"min-width":r})}else a.find("th[colindex="+B+"] , td[colindex="+B+"]").css({width:r,"min-width":r});H=0;for(d=0;d<Y;d++){var h=q[d];H+=h.width,h.x=H,h.x>=t||h.x<=X?$(J[d]).addClass("hidden").css({left:h.x+"px"}):$(J[d]).removeClass("hidden").css({left:h.x+"px"})}A=void 0,o.css({width:t,height:n-s.height()});var f=o[0];s.css({width:t-(f.scrollHeight>f.offsetHeight?17:0)})}})}return e.cache=l,e.rowColSpan&&this.rowColSpan(e.rowColSpan),this},$.fn.addCover=function(){this.hasClass("zCover")||this.append('<div class="zCover active"></div>'),$.fn.removeCover=function(){this.removeClass("active")}},$.fn.addScrollbar=function(e){if(!this.length)return console.error("Target not found."),!1;if(!this.parent().hasClass("zTable"))return console.error("zTable div parent is not found."),!1;var t=isUD(e)?this[0].offsetWidth:isUD(e.width)?this[0].offsetWidth:e.width,n=isUD(e)?this[0].offsetHeight:isUD(e.height)?this[0].offsetHeight:e.height,i=(this.closest(".zTable"),this.find("thead")),a=this.find("tbody");a.css({width:t,height:n-i.height()}).on("scroll",function(){i.scrollLeft($(this).scrollLeft())});var s=a[0];return i.css({width:t-(s.scrollHeight>s.offsetHeight?17:0)}),this.addColResize(e),this.addClickHighlight(),this},$.fn.autoHideScroll=function(e){(e=e||{}).isHoverBR=e.isHoverBR||!1;for(var t=0;t<this.length;t++){var n=this[t],i=$(n),a=i.offset(),s=n.clientWidth,o=n.clientHeight;isUD(i.data("autoHide"))&&(!s&&!o||"hidden"!==i.css("overflow")&&"auto"!==i.css("overflow")?console.error("%o style height, width, and overflow are undefined.",i):(i.scrollTop(0).scrollLeft(0),e.isHoverBR?i.off("mousemove, mouseout").on("mousemove",function(e){var t=e.pageX-a.left,i=e.pageY-a.top;n.style.overflow=s-17<=t&&s>=t||o-17<=i&&o>=i?"auto":"hidden"}).mouseout(function(){n.style.overflow="hidden"}):i.off("mouseover, mouseout").on("mouseover",function(){this.style.overflow="scroll"}).mouseout(function(){this.style.overflow="auto"}),i.data("autoHide",!0)))}return this},$.fn.addClickHighlight=function(){var e=this.find("tbody > tr");return e.unbind("click"),e.click(function(){e.removeClass("active"),$(this).addClass("active")}),this},$.fn.center=function(){return this.css("position","fixed"),this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px"),this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px"),this},$.fn.centerWidth=function(){return this.css("position","fixed"),this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px"),this},$.fn.checkValueExists=function(e){var t=this,n="zDataExist",i="data already exist",a=1500;isUD(e.keyInputDelay)||(a=e.keyInputDelay),$("."+n).remove(),e.message&&(i=e.message);var s='<div class="'+n+'">'+i+".</div>";$("body").append(s);var o=$("."+n);isUD(e.isNotExistShow)&&(e.isNotExistShow=!1),typeof t.tmr===ud&&(t.tmr=null),this.on("keyup change",function(){var i=$(this);if(""===$.trim(this.value))return o.hide(),!1;var s=$.trim(this.value);zsi.timer&&clearTimeout(zsi.timer),zsi.timer=setTimeout(function(){var a={left:i.offset().left,top:i.offset().top-o.innerHeight()-3,onHide:function(){i.val(""),isUD(e.onHide)||e.onHide(i.closest(".zRow"))}};if(e.time&&(a.time=e.time),!1===e.isNotExistShow&&t.length>0){for(var r=t.index(i),l=0;l<t.length;l++){var d=t[l];r!==l&&""!==$.trim(d.value)&&d.value.toLowerCase()===s.toLowerCase()&&$("."+n).css({"z-index":zsi.getHighestZindex()+1}).showAlert(a)}i.removeClass("loadIconR")}if(!isUD(e.isCheckOnDb)&&0==e.isCheckOnDb)return t;i.addClass("loadIconR"),$.getJSON(base_url+"sql/exec?p="+(typeof e.procedureName!==ud?e.procedureName:"checkValueExists")+" @code='"+e.code+"',@colName='"+e.colName+"',@keyword='"+s+"'",function(t){i.removeClass("loadIconR"),t.rows[0].isExists.toUpperCase()===(e.isNotExistShow?"N":"Y")&&$("."+n).css({"z-index":zsi.getHighestZindex()+1}).showAlert(a)})},a)})},$.fn.checkMandatory=function(){var e,t=[],n=this,i=this.data("mandatories"),a=0;if(typeof i===ud)return!0;var s=function(i,a,s){var o,r=i.names,l=a.titles,d=[];t[s]="N";for(var c=0;c<r.length;c++)if((e=n.find("[name='"+r[c]+"']").toArray()).length>1)for(var u=0,h=0;h<e.length;h++)"hidden"!=e[h].type&&(o||(o=e[h]),""!==$.trim(e[h].value)&&(d[u]=h,u++,t[s]="Y"));else if(e[0]&&(e[0].value===ud||""===$.trim(e[0].value)))return e[0].focus(),alert("Enter "+l[c]+"."),!1;if("M"==i.type){if(i.required_one&&"Y"==i.required_one&&0===d.length)return alert("Please enter at least 1 record."),o&&o.focus(),!1;for(c=0;c<r.length;c++)if((e=n.find("[name='"+r[c]+"']").toArray()).length>1)for(h=0;h<d.length;h++)if("hidden"!=e[d[h]].type&&""===$.trim(e[d[h]].value))return e[d[h]].focus(),alert("Enter "+l[c]+"."),!1}return!0};for(a=0;a<i.groupNames.length;a++)if(!s(i.groupNames[a],i.groupTitles[a],a))return!1;if(i.required_one_indexes){var o=i.required_one_indexes,r=t,l=0;for(a=0;a<o.length;a++)for(var d=0;d<r.length;d++)o[a]==d&&"N"==r[d]&&l++;if(o.length==l)return alert("Please enter at least one record."),!1}return!0},$.fn.clearGrid=function(){this.find(".zGridPanel").length>0?this.find(".zGridPanel .zRows #table").html(""):$(this).children("tbody").html("")},$.fn.clearSelect=function(e,t){var n=t||"";this.html(e?"<option>"+n+"</option>":n)},$.fn.createDragScroll=function(e){var t,n,i,a,s,o=$(this),r=o.children(".zoomPanel");return o.data("isDraggable",!0),o.mousedown(function(e){e.preventDefault(),s=!0,t=e.pageX,n=e.pageY,i=$(this).scrollTop(),a=$(this).scrollLeft()}),o.mouseleave(function(e){s=!1}),$("body").mousemove(function(e){if(o.data("isDraggable")&&s){var r=e.pageX,l=e.pageY;o.scrollTop(i-l+n),o.scrollLeft(a-r+t)}}),$("body").mouseup(function(e){s=!1}),o.bind("mousewheel DOMMouseScroll",function(e){var t=window.event||e;if((t.detail?-120*t.detail:t.wheelDelta)>0)o.find("#zoomIn").click();else{var n=t.target;"img"!==t.target.tagName.toLowerCase()&&(n=$(n).find("#targetImg").get(0)),n.getBoundingClientRect().width>o.width()/2&&o.find("#zoomOut").click()}}),(e.isZoom||!0===e.isZoom)&&r.createZoomCtrl({}),o.autoHideScroll({isHoverBR:!0}),o},$.fn.createZoomCtrl=function(e){var t=this,n=t.closest(".imgFrame");this.inVal=.03,_$zp=t;var i=function(e){var i;t.css({transform:"scale("+(i=function(e){var t=0,n=e;if(n.length>0){var i=n[0],a=n[1];t=Math.sqrt(i*i+a*a)}return t}(t.getCssTransformValue()),e?i+=t.inVal:i-=t.inVal,i)+")"}),n.css("overflow","hidden"),setTimeout(function(){n.css("overflow","auto")},1)},a=this.parent();return new zsi.easyJsTemplateWriter(a).div({class:"zoomCtrl"}).in().bsButton({id:"zoomIn",class:"btn-default btn-sm",icon:"zoom-in"}).bsButton({id:"zoomOut",class:"btn-default btn-sm",icon:"zoom-out"}).bsButton({id:"refresh",class:"btn-default btn-sm",icon:"refresh"}),a.find("#zoomIn,#zoomOut,#refresh").click(function(){"zoomin"===this.id.toLowerCase()?i(!0):i(!1),"refresh"===this.id.toLowerCase()&&n.resetDragScroll()}),a.children(".zoomCtrl").css({top:a.offset().top,left:a.offset().left}),this},$.fn.dataBind=function(){var e=arguments,t=e[0];if(this.hasClass("zGrid"))return $(this).dataBindGrid(t);if(this.parent().hasClass("zTable"))return $(this).loadTable(t);var n=this,i=function(e){var i={data:e.rows,selectedValue:t.selectedValue,isRequired:t.required,onComplete:t.onComplete,onEachComplete:t.onEachComplete,onChange:t.onChange};typeof t.text!==ud&&typeof t.value!==ud&&(i.text=t.text,i.value=t.value),n.fillSelect(i),!0===t.isUniqueOptions&&n.setUniqueOptions()};if("string"==typeof t){var a=zsi.config.baseURL;(t={}).url=(a||"/")+"selectoption/code/"+e[0],typeof e[1]!==ud&&(t.onComplete=e[1]),$.getJSON(t.url,i)}else if("object"==typeof t)if(t.sqlCode){var s={sqlCode:t.sqlCode,onComplete:i};t.parameters&&(s.parameters=t.parameters),zsi.getData(s)}else $.getJSON(t.url,i);return this},$.fn.dataBind2=function(){var e,t,n=this.attr("name")+"_ddl",i="#"+n;$("body").append('<select id="'+n+'" class="zDDList" size="15" ></select>');var a=arguments,s=a[0];"string"==typeof a[0]&&((s={}).url=zsi.config.baseURL+"selectoption/code/"+a[0],typeof a[1]!==ud&&(s.onComplete=a[1]));return typeof s.url!==ud&&$.getJSON(s.url,function(e){var t={data:e.rows,selectedValue:s.selectedValue,isRequired:s.required,onComplete:s.onComplete};typeof s.text!==ud&&typeof s.value!==ud&&(t.text=s.text,t.value=s.value);var n=15;e.rows.length<n+1&&(n=e.rows.length+1),$(i).attr({size:n}).fillSelect(t)}),this.parent().find(".zDdlBtn").click(function(){var n=$(this).parent();if(e=n.find(":hidden"),t=n.find("#text"),_select=$(i),_select.val(e.val()),typeof s.onClick!==ud&&s.onClick($(this.parentNode),e,_select),_select.find("option").length>0){_select.css({display:"block",top:n.offset().top+n.innerHeight(),left:n.offset().left}).focus(),_select.outerWidth()<n.outerWidth()&&_select.css({width:n.outerWidth()});var a=_select.find('[value="'+e.val()+'"]');if(a.length>0){var o=a.offset().top,r=_select.offset().top;_select.scrollTop(_select.scrollTop()+(o-r))}else _select.scrollTop(0)}}),$(i).unbind().click(function(){var n=$(this);e.val(n.val()),t.html(n.find("option:selected").text()),n.css({display:"none"})}).keyup(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&$(this).css({display:"none"})}),$(document).on("wheel mouseup",function(e){var t=$(".zDDList");t.is(e.target)||0!==t.has(e.target).length||t.hide()}),this},$.fn.dataBindGrid=function(e){var t,n=this,a=e,s=".zGridPanel.left",o=".zGridPanel.right",r='<span class="arrow-up"></span>',l='<span class="arrow-down"></span>',d=r+l,c=zsi.easyJsTemplateWriter,u=0,h=0,f=0,p=(e.dataRows,[]),m=[],v=null,g=[],y=!1,w=zsi.bs.ctrl,b=zsi.setValIfNull,C=function(){n.find("div[id='table']").html("")},x=function(e){0!==e.headers.length&&(e.headers.html(T(e.dataTable,e.startGroupId)),y&&e.headers.append("<div>&nbsp;</div"),e.headers.find(".item .zSort a").click(function(){var e=$(this),i=e.attr("sortColNo"),s=0,o=e.attr("class");n.left=t.offset().left-h,n.find(".sPane").html(d),n.find(".zSort a").removeAttr("class"),e.addClass(o),typeof e.attr("class")===ud&&e.addClass("desc"),e.attr("class").indexOf("asc")>-1?(e.removeClass("asc"),e.addClass("desc"),e.find(".sPane").html(l),s=1,a.onSortChange&&a.onSortChange(1)):(e.removeClass("desc"),e.addClass("asc"),e.find(".sPane").html(r),s=0,a.onSortChange&&a.onSortChange(0)),a.parameters.col_no=i,a.parameters.order_no=s,n.dataBindGrid(a)}),e.table.css({width:e.width}))},z=function(){var e=n.find(o+" .zHeaders"),t=n.find(o+" #table"),i=n.find(o).width(),a=n.data("grid-width-right");i>0&&(i<a+20?(e.css({width:a+40}),t.css({width:a})):(e.css({width:"unset"}),t.css({width:"unset"})))},_=function(e){if(!("Y"===e.panelType&&m.length>0)){for(var t="R"===e.panelType?p:m,i="R"===e.panelType?n.find(".right").find("#table"):n.find(n.clsPanelL).find("#table"),s=$("<div class='zRow'></div>"),o=null,r=0;r<t.length;r++){var l=t[r],d="width:"+t[r].width+"px;"+t[r].style,c="&nbsp;",u=$('<div class="zCell'+b(l," "+l.class)+'" style="'+d+'"></div>');e.data&&(e.data.recordIndex=e.index),l.onRender?(u.onRender=l.onRender,c=u.onRender(e.data)):(c=typeof l.type===ud?$('<span class="text" value="'+b(e.data,l.name)+'"></span>'):typeof l.displayText!==ud?w({name:l.name,style:l.style,type:l.type,value:b(e.data,l.name,l.defaultValue),displayText:b(e.data,l.displayText)}):w({name:l.name,style:l.style,type:l.type,value:b(e.data,l.name,l.defaultValue)}),0!==r&&r!==a.selectorIndex||typeof a.selectorType!==ud&&(c+=null!==e.data?w({name:"checkbox"===a.selectorType?"cb":"radio"===a.selectorType?"rad":"ctrl",type:a.selectorType}):"")),((typeof l.groupId!==ud?l.groupId:0)>0||l.onRender||!1===y)&&(u.html(c),s.append(u),"R"!==e.panelType||isUD(a.toggleMasterKey)||(o=$('<div id="childPanel'+zsi.replaceIllegalId(b(e.data,a.toggleMasterKey))+'" class="zExtraRow" style="display:none"><div class="zGrid"></div></div>')))}i.append(s),null!==o&&i.append(o),isUD(a.onEachComplete)||(s.onEachComplete=_o.onEachComplete,s.onEachComplete(e))}},k=function(){t.parent().scroll(function(){var e=t.offset().left,n=t.offset().top,i=$(t.closest(".right").find(".zHeaders")[0]),a=$(this).closest(".right").prev().find("#table");i.offset({left:e}),a.offset({top:n})})},N=function(e){var t=n.find(e+" .zHeaders > .item"),i=0;return t.each(function(e,t){i+=$(t).width()}),i},T=function(t,n){return function(t,n){for(var i="",a=0;a<t.length;a++)if(typeof t[a].groupId===ud||t[a].groupId==n){var s=typeof t[a].sortColNo!==ud,o="",r="",l=typeof t[a].groupId!==ud?" group"+t[a].groupId:"",d=typeof t[a].class!==ud?" "+t[a].class:"",c=typeof t[a].id!==ud?'id="'+t[a].id+'"':"",u=typeof t[a].id!==ud?'id="title'+t[a].id+'"':"",h=y?" groupItem":"";typeof t[a].width!==ud&&(o='style="width:'+t[a].width+"px;"+t[a].style+'"',r='style="'+t[a].style+'"'),i+="<div "+c+" class='item"+h+l+d+"' "+o+">",i+="<div "+u+" class='title"+(s?" hasSort":"")+"' "+r+' ><span class="text">'+t[a].text+"</span></div>",(isUD(e.resizable)||!0===e.resizable)&&(i+="<div class='cr'></div>"),typeof t[a].groupId!==ud&&(i+=T(t,t[a].id)),i+=D(t[a].sortColNo),i+="</div>"}return i}(t,n)},D=function(e){return typeof e!==ud?'<div class="zSort"><a href="javascript:void(0);" sortColNo="'+e+'" ><span class="sPane">'+d+"</span></a></div>":""},R=function(e){return typeof e.isFreeze!==ud&&!1!==e.isFreeze},I=function(){var e;!function(e){if(typeof e.blankRowsLimit!==ud)for(var t=0;t<e.blankRowsLimit;t++)m.length>0&&_({data:null,panelType:"L",index:t}),_({data:null,panelType:"R",index:t})}(a),(e=n.find(".zRow")).click(function(){var t=$(this).index();e.removeClass("active"),n.find(".zRow:nth-child("+(t+1)+")").addClass("active")}),e.find("select, input").on("keyup change",function(){$(this).closest(".zRow").find("[name='is_edited']").val("Y")}),k(),n.addClickHighlight(),n.setColumnResize()},S=function(){clearTimeout(v),v=setTimeout(function(){n.closest(".tab-pane").length>0&&$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){z()}),z()},10)};if($.fn.setRowHighlights=function(){this.find(".zRow").removeClass("odd").removeClass("even");var e=this.find(".zGridPanel.right"),t=this.find(".zGridPanel.left");if(e.length>0){var n=e.find(".zRows .zRow:not(.hidden)"),i=t.length>0?t.find(".zRows .zRow:not(.hidden)"):null;$.each(n,function(e){var t=(e+1)%2==0?"even":"odd";$(this).addClass(t),null!==i&&$(i.get(e)).addClass(t)})}return this},this.setPageCtrl=function(e,t){var i,s=$(this),o=function(e,t){for(var n="",a=1;a<=t;a++)n+="<option value='"+a+"'>"+a+"</option>";i=s.find("#pageNo").html(n),s.find("#recordsNum").html(e.length),s.find("#of").html("of "+t)};o(t.rows,t.returnValue),i.change(function(){a.parameters.pno=this.value,n.dataBindGrid(a),e.onPageChange&&e.onPageChange()}),s.find("#rpp").keyup(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&(a.parameters.rpp=this.value,a.callBack=function(e){o(e.data.rows,e.data.returnValue),a.callBack=null},n.dataBindGrid(a))})},this.onRequestDone=function(e){var t=this.children(s),i=this.children(o);this.left={panel:t,rows:t.find(".zRows")},this.right={panel:i,rows:i.find(".zRows")},e.params.onComplete&&(this._onComplete=e.params.onComplete,this._onComplete(e)),this.setRowHighlights(),e.params.callBack&&e.params.callBack(e),n.data("grid.parameters",e)},this.setColumnResize=function(){var t=this,n=function(){return!!zsi.tableResize&&t.is(zsi.tableResize.curCol.closest(".zGrid"))};(isUD(a.resizable)||!1!==a.resizable)&&($(".zHeaders .item .cr").unbind("mousedown").on("mousedown",function(e){var n=$(e.target).parent();if(n.hasClass("group0")){var i=n.find(".groupItem");n=$(i[i.length-1])}zsi.tableResize={id:t.attr("id"),curCol:n,curLastWidth:parseFloat(n.css("width")),hdrLastWidth:parseFloat(n.closest(".zHeaders").css("width")),tblLastWidth:parseFloat(n.closest(".zGridPanel").find("#table").css("width")),nextLastWidth:parseFloat(n.next().css("width")),lastX:e.clientX}}),$(document).on("mousemove",function(i){if(typeof zsi.tableResize!==ud&&null!==zsi.tableResize){var r=zsi.tableResize;if(n()){var l=-1,d=r.curCol.closest(".group0");if(d.length>0)for(var c=d.parent().find(".groupItem"),u=0;u<c.length&&($(c[u]).hasClass("group0")||(l++,!r.curCol.is(c[u])));u++);var h=d.length>0?l:r.curCol.index(),f=i.clientX-r.lastX,p=r.curCol.closest(".zGridPanel").find(".zRows").eq(0),m=a.dataRows;if(!(r.curLastWidth+f<25)){r.curCol.css({width:r.curLastWidth+f}),e.width&&f>0&&r.curCol.closest(".zHeaders").css({width:r.hdrLastWidth+f});var v=function(e){for(var t=[],n=0;n<e.length;n++)$(e[n]).closest(".zRows").is(p)&&t.push(e[n]);return $(t)}(p.find("#table > .zRow > .zCell:nth-child("+(h+1)+")"));v.css({width:r.curLastWidth+f}),v.parent().parent().css({width:r.tblLastWidth+f}),m[h]&&(m[h].width=r.curLastWidth+f),zsi.tableResize.curCol.closest(".zGridPanel").hasClass("right")?t.data("grid-width-right",N(o)):t.data("grid-width-left",N(s)),z()}}}}).on("mouseup",function(e){n()&&(zsi.tableResize=null)}))},$.each(a.dataRows,function(){(this.groupId>0||typeof this.groupId===ud)&&(typeof this.groupId!==ud&&!1===y&&(y=!0),g.push(this)),R(this)?m.push(this):p.push(this)}),typeof this.isInitiated===ud){$(window).resize(S),isUD(a.parameters)&&(a.parameters={});var P=a.parameters;P.rpp=isUD(a.rowsPerPage)?isUD(P.rpp)?null:P.rpp:a.rowsPerPage,_rpp=null!==P.rpp?P.rpp:0;var L="",U=function(e){return'<div class="zGridPanel '+e+'"><div class="zHeaders"></div><div class="zRows"><div id="table"></div></div><div class="zFooter"></div></div>'};m.length>0&&(L+=U("left")),L+=U("right"),this.url=a.url,this.isInitiated=!0,this.html(L+(typeof a.isPaging!==ud&&!0===a.isPaging?(new c).div({class:"zPageFooter "}).in().div({class:"pagestatus",value:"Number of records in a current page : <i id='recordsNum'> 0 </i>"}).div({class:"pagectrl",value:(0===_rpp?"":(new c).label({value:"No. of Rows:"}).input({id:"rpp",name:"rpp",type:"text",value:_rpp}).html())+(new c).label({id:"page",value:"Page"}).select({id:"pageNo"}).label({id:"of",value:"of 0"}).html()}).html():"")),a.isAsync=typeof a.isAsync!==ud&&a.isAsync,n.curPageNo=!0===a.isAsync?1:0;var O=this.find(".right"),E=this.find(".left");a.columnHeight;for(i=0;i<g.length;i++)g[i].width,R(g[i])?h+=g[i].width:f+=g[i].width;typeof a.startGroupId===ud&&(a.startGroupId=0),t=O.find("#table"),_tableLeft=E.find("#table"),n.find(".zRows").css("height",a.height+"px"),m.length>0&&(E.css("width",h+"px"),O.css("width",a.width-h-4+"px"),x({headers:E.find(".zHeaders"),table:_tableLeft,dataTable:m,width:h,startGroupId:a.startGroupId}),n.data("grid-width-left",h)),x({headers:O.find(".zHeaders"),table:t,dataTable:p,width:f,startGroupId:a.startGroupId}),n.data("grid-width-right",f),S()}else E=this.find(".left").find("#table"),t=this.find(".right").find("#table");if(typeof a.isNew!==ud&&!0===a.isNew&&C(),a.url||a.sqlCode){(a.isAsync&&1===n.curPageNo||!a.isAsync)&&C();var j={dataType:"json",cache:!1,success:function(e){var i=e.returnValue>0?e.returnValue:0;u=e.rows.length,$.each(e.rows,function(e){m.length>0&&_({data:this,panelType:"L",index:e}),_({data:this,panelType:"R",index:e})}),a.isAsync&&n.curPageNo<i?(e.pageNo=n.curPageNo,a.onAsyncComplete&&a.onAsyncComplete(e),n.curPageNo++,a.parameters.pno=n.curPageNo,k(),n.dataBindGrid(n.params)):(I(),n.find("#recordsNum").html(u),typeof n.isPageInitiated===ud&&(n.setPageCtrl(a,e),n.isPageInitiated=!0),n.left&&t.parent().scrollLeft(Math.abs(n.left)),a.isAsync&&a.onAsyncComplete&&(e.pageNo=n.curPageNo,a.onAsyncComplete(e)),n.onRequestDone({params:a,data:e}))}};if(typeof a.sqlCode!==ud){if(typeof zsi.config.getDataURL===ud)return void alert("zsi.config.getDataURL is not defined in AppStart JS.");j.url=zsi.config.getDataURL+"?ts="+(new Date).getTime(),j.data=JSON.stringify({sqlCode:a.sqlCode,parameters:a.parameters}),j.type="POST"}else{var q=a.url,H=a.parameters,A=function(e){return e.indexOf("@")>-1?",":" "};q+=H.rpp?A(q)+"@rpp="+H.rpp:"",q+=H.pno?A(q)+"@pno="+H.pno:"",j.url=q}n.bind("refresh",function(){zsi.tmr&&clearTimeout(zsi.tmr),zsi.tmr=setTimeout(function(){n.dataBindGrid(a)},1)}),$.ajax(j)}else typeof a.rows!==ud?($.each(a.rows,function(e){m.length>0&&_({data:this,panelType:"L",index:e}),_({data:this,panelType:"R",index:e})}),I(),n.onRequestDone({params:a,data:a.rows})):(isUD(a.blankRowsLimit)&&(a.blankRowsLimit=5),I(),n.onRequestDone({params:a}))},$.fn.deleteData=function(e){for(var t="",n=this.find("input[name='cb']:checked").getCheckBoxesValues(),i=e.procedure?e.procedure:"deleteData",a=0;a<n.length;a++)""!==t&&(t+="/"),t+=n[a];""!==t&&confirm("Are you sure you want to delete selected items?")&&$.post(base_url+"sql/exec?p="+i+" @pkey_ids='"+t+"',@table_code='"+e.code+"'",function(t){e.onComplete(t)}).fail(function(e){alert("Sorry, the curent transaction is not successfull.")})},$.fn.expandCollapse=function(e){return this.click(function(){var t=$(this).find("span");t.attr("class").indexOf("down")>-1?t.removeClass("glyphicon glyphicon-collapse-down").addClass("glyphicon glyphicon-collapse-up"):t.removeClass("glyphicon glyphicon-collapse-up").addClass("glyphicon glyphicon-collapse-down");var n=$(this.parentNode.parentNode);if(typeof n.attr("extrarow")===ud)n.attr("extrarow","1"),n.after("<tr class='trOpen extraRow "+n.attr("class")+"'> <td colspan='"+n.find("td").length+"'> "+e.onInit(this)+" </td></tr>"),e.onAfterInit(n.next());else{var i=n.next();i.attr("class").indexOf("trOpen")>-1?i.removeClass("trOpen").addClass("trClose"):i.removeClass("trClose").addClass("trOpen")}}),this},$.fn.htmlToExcel=function(e){e||(e={});var t=this.get(0);if(t){var n={html:"<html><head><meta charset='utf-8' /><style> table, td {border:thin solid black}table {border-collapse:collapse;font-family:Tahoma;font-size:10pt;}</style></head><body>"+t.outerHTML+"</body></html>"};e.fileName&&(n.fileName=e.fileName),zsi.htmlToExcel(n)}else console.error("table element not found.")},$.fn.fillSelect=function(e){var t=this;return typeof e.isRequired===ud&&(e.isRequired=!1),typeof e.required!==ud&&(e.isRequired=e.required),typeof e.selectedValue===ud&&(e.selectedValue=""),this.clearSelect(),!1===e.isRequired&&t.append("<option></option>"),$.each(e.data,function(n,i){var a=typeof this.value2===ud?"":' value2="'+this.value2+'"',s="",o="";typeof e.text!==ud&&typeof e.value!==ud?(o=this[e.value],s=this[e.text]):(o=this.value,s=this.text),t.append("<option "+a+' value="'+o+'">'+s+" </option>")}),$(this).change(function(){var t=$(this);isUD(e.onChange)||(t.__onChange=e.onChange,t.__onChange({index:$(this).find(":selected").index(),data:e.data,row:$(this).closest(".zRow")}))}),setTimeout(function(){$.each(t,function(){var t=$(this),n=t.attr("selectedvalue");$.each($(this).find("option"),function(){(n?this.value===n:this.value===e.selectedValue)&&$(this).prop("selected",!0)}),e.onEachComplete&&(t.bind("onEachComplete",e.onEachComplete),t.trigger("onEachComplete",e.data))}),e.onComplete&&(t.__onComplete=e.onComplete,t.__onComplete(e.data))},10),this},$.fn.getCheckBoxesValues=function(){var e=arguments,t=e.length>0?e[0]:"input[type=hidden]",n=[];return this&&$.each(this,function(){n.push($(this.parentNode).children(t).val())}),n},$.fn.getCssTransformValue=function(){var e=this.css("transform"),t=[];return"none"!=e&&(t=(t=(t=e.split("(")[1]).split(")")[0]).split(",")),t},$.fn.convertToTable=function(e){var t=this.attr("id"),n=function(e){var t=$(e);return t.find("input,select").not(":hidden").length>0?t.find("input,select").val():t.find(".text").length>0?t.find(".text").html():t.find("a").length>0?t.find("a").html():e.innerText};if(this.hasClass("zGrid")){var i=document.createElement("table");i.setAttribute("id","Excel"+t),i.setAttribute("class","hide"),this.after(i);var a=!1;row=i.insertRow(-1),this.find(".zHeaders .item").each(function(e,t){a&&t.parentNode!=a&&(row=i.insertRow(-1)),a=t.parentNode;var s=document.createElement("TH");s.innerHTML=n(t),row.appendChild(s)}),this.find(".zRows .zCell").each(function(e,t){a&&t.parentNode!=a&&(row=i.insertRow(-1)),a=t.parentNode;var s=row.insertCell(-1);s.innerHTML=n(t),s.style=t.getAttribute("style")}),e&&e($(i))}return this},$.fn.loadData=function(e){var t=this;zsi.__setTableObjectsHistory(t,e);var n=typeof e.onEachComplete!==ud;if(n){var i=e.onEachComplete.toString();args=i.replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s))/gm,"").match(/^function\s*[^\(]*\(\s*([^\)]*)\)/m)[1].split(/,/);args.length<1&&console.warn("you must implement these parameters: tr,data")}if(typeof e.sortIndexes!==ud&&!1===zsi.__getTableObject(t).isInitiated){var a=e.sortIndexes,s=t.find("thead th");0===s.length&&console.log("No THead found.");for(var o="<span class='arrow-up'></span>",r="<span class='arrow-down'></span>",l=o+r,d=0;d<a.length;d++){var c=s[a[d]];$(c).append("<span class='zSort'><a href='javascript:void(0);'><span class='sPane'>"+l+"</span></a></span>")}var u=t.find(".zSort a"),h=e.url;u.click(function(){var n=u.index(this);zsi.table.sort.colNo=a[n];this.text;$(".sPane").html(l);var i=$(this).attr("class");typeof i===ud?(u.removeAttr("class"),$(this).addClass("asc"),$(this).find(".sPane").html(o)):i.indexOf("asc")>-1?($(this).removeClass("asc"),$(this).addClass("desc"),$(this).find(".sPane").html(r),zsi.table.sort.orderNo=1):($(this).removeClass("desc"),$(this).addClass("asc"),$(this).find(".sPane").html(o),zsi.table.sort.orderNo=0),zsi.table.__sortParameters="@col_no="+zsi.table.sort.colNo+",@order_no="+zsi.table.sort.orderNo,e.url=(h.indexOf("@")<0?h+" ":h+",")+zsi.table.__sortParameters+(""===zsi.table.__pageParameters?"":","+zsi.table.__pageParameters),t.loadData(e)})}var f=t,p=0,m=function(t){var i="";i+="<tr rowObj class='"+zsi.getOddEven()+"'>";for(var a=0;a<e.td_body.length;a++){var s="";typeof e.td_properties!==ud&&typeof e.td_properties[a]!==ud&&(s=e.td_properties[a]);var o="",r="",l="",d="";t&&(t.td={}),e.td_body[a]?o=e.td_body[a](t):console.log("%cArray item is not a function under td_body[]","color:red;"),t&&(r=typeof t.td.attr===ud?"":t.td.attr,l=typeof t.td.style===ud?"":style=' style="'+t.td.style+'" ',d=typeof t.td.class===ud?"":style=' class="'+t.td.class+'" '),i+="<td "+s+r+l+d+" >"+o+"</td>"}i+="</tr>",f.append(i);var c=$("tr[rowObj]");c.removeAttr("rowObj"),n&&e.onEachComplete(c,t)};if(typeof e.isNew!==ud&&1==e.isNew&&f.clearGrid(),e.url||e.data){f.find("thead").length>0&&f.clearGrid();var v={dataType:"json",cache:!1,success:function(n){p=n.rows.length,typeof e.td_body!==ud&&$.each(n.rows,function(){m(this)}),t.find("#recordsNum").html(p),typeof zsi.page.__pageNo!==ud&&null!==zsi.page.__pageNo||(zsi.page.__pageNo=1,zsi.__setPageCtrl(e,e.url,n,t)),zsi.__getTableObject(t).isInitiated=!0,t.addClickHighlight(),e.onComplete&&e.onComplete(n)}};if(typeof e.data!==ud){if(typeof zsi.config.getDataURL===ud)return void alert("zsi.config.getDataURL is not defined in AppStart JS.");v.url=zsi.config.getDataURL,v.data=JSON.stringify(e.data),v.type="POST"}else v.url=e.url;t.bind("refresh",function(){zsi.tmr&&clearTimeout(zsi.tmr),zsi.tmr=setTimeout(function(){t.loadData(e)},1)}),$.ajax(v)}else if(typeof e.rows!==ud)typeof e.td_body!==ud&&$.each(e.rows,function(){m(this)}),e.onComplete&&e.onComplete(data),t.addClickHighlight();else{typeof e.blankRowsLimit===ud&&(e.blankRowsLimit=5);for(var g=0;g<e.blankRowsLimit;g++)m();typeof e.onEachComplete===ud&&e.onComplete&&e.onComplete(),t.addClickHighlight()}},$.fn.jsonSubmit=function(e){var t;if(typeof e.isSingleEntry!=ud&&!0===e.isSingleEntry){var n=this.find("*").serializeArray();e.parameters={};for(var i=0;i<n.length;i++)e.parameters[n[i].name]=n[i].value;t=e}else t=this.hasClass("zGrid")>0?this.toJSON2(e):this.toJSON(e);var a={type:"POST",url:typeof e.url!==ud?e.url:base_url+"data/update",data:JSON.stringify(t),contentType:"application/json"};void 0!==e.onError&&(a.error=e.onError),void 0!==e.onComplete&&(a.success=e.onComplete),$.ajax(a)},$.fn.loadTable=function(e){var t=this;if(this.setPageCtrl=function(e,t){var n,i=$(this),a=function(e,t){for(var a="",s=1;s<=t;s++)a+="<option value='"+s+"'>"+s+"</option>";n=i.find("#pageNo").html(a),i.find("#recordsNum").html(e.length),i.find("#of").html("of "+t)};a(t.rows,t.returnValue),n.change(function(){e.parameters.pno=this.value,_obj.loadTable(_obj.params)}),i.find("#rpp").keyup(function(t){"13"==(t.keyCode?t.keyCode:t.which)&&(e.parameters.rpp=this.value,_obj.params.callBack=function(e){a(e.data.rows,e.data.returnValue),_obj.params.callBack=null},_obj.loadTable(_obj.params))})},!t.length)return console.error("Target not found."),!1;if(!t.parent().hasClass("zTable"))return console.error("zTable div parent is not found."),!1;t.onComplete=e.onComplete;var n=!isUD(e.onEachComplete);n&&(e.onEachComplete.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s))/gm,"").match(/^function\s*[^\(]*\(\s*([^\)]*)\)/m)[1].split(/,/).length<1&&console.warn("You must implement these parameters: tr,data"));t.find("thead").length||t.append("<thead/>"),t.find("tbody").length||t.append("<tbody/>");var i=e.width,a=e.height,s=e.dataRows,o=s.length,r=(e.blankRowsLimit,t.closest(".zTable")),l=t.find("thead"),d=l.find("th"),c=t.find("tbody"),u=new zsi.easyJsTemplateWriter,h=zsi.bs.ctrl,f=zsi.setValIfNull;if(r.css({width:i,height:a}),0===d.length){u.tr().in();for(var p=0;p<o;p++){var m=s[p];u.th({value:m.text,style:m.style+"min-width:"+m.width+"px;width:"+m.width+"px;"})}l.html(u.html()),d=l.find("th")}if(typeof e.sortIndexes!==ud&&typeof this.isInitiated===ud){for(var v=e.sortIndexes,g="<span class='arrow-up'></span>",y="<span class='arrow-down'></span>",w=g+y,b=0;b<v.length;b++)$(d[v[b]]).append(u.new().span({class:"zSort"}).in().a({href:"javascript:void(0);"}).in().span({class:"sPane",value:w}).html());var C=t.find(".zSort a");e.url;C.click(function(){typeof e.parameters===ud&&(e.parameters={});var n=$(this),i=C.index(this),a=v[i];$(".sPane").html(w);var s=n.attr("class");typeof s===ud?(C.removeAttr("class"),n.addClass("asc").find(".sPane").html(g)):s.indexOf("asc")>-1?(n.removeClass("asc").addClass("desc").find(".sPane").html(y),e.parameters.order_no=1):(n.removeClass("desc").addClass("asc").find(".sPane").html(g),e.parameters.order_no=0),e.parameters.col_no=a,e.parameters.order_no=_orderNo,t.loadTable(e)}),this.isInitiated=!0}var x=function(t){u.new().tr().in().custom(function(){for(var n=0;n<o;n++){var i=s[n],a={style:i.style+"min-width:"+i.width+"px;width:"+i.width+"px;",attr:'colindex="'+n+'"'};isUD(i.attr)||(a.attr+=i.attr),isUD(i.class)||(a.class=i.class),i.onRender?a.value=i.onRender(t):(isUD(i.type)?a.value=t[i.name]:isUD(i.displayText)?a.value=h({name:i.name,style:i.style,type:i.type,value:f(t,i.name,i.defaultValue)}):a.value=h({name:i.name,style:i.style,type:i.type,value:f(t,i.name,i.defaultValue),displayText:f(t,i.displayText)}),0!==n&&n!==e.selectorIndex||isUD(e.selectorType)||(a.value+=null!==t?h({name:"checkbox"===e.selectorType?"cb":"radio"===e.selectorType?"rad":"ctrl",type:e.selectorType}):"")),this.td(a)}return this}),c.append(u.html()),n&&e.onEachComplete(c.find("tr:last-child"),t)};if(typeof e.isNew!==ud&&1==e.isNew&&t.clearGrid(),t.children("tbody").html(""),e.url||e.data){l.length>0&&t.clearGrid();var z={dataType:"json",cache:!1,success:function(n){n.rows.length;var i=t.find("#recordsNum");o&&$.each(n.rows,function(){x(this)}),i.length&&(_obj.find("#recordsNum").html(num_rows),typeof _obj.isPageInitiated===ud&&(_obj.setPageCtrl(e,n),_obj.isPageInitiated=!0)),isUD(t.onComplete)||t.onComplete({params:e,data:n}),t.addScrollbar(e)}};if(typeof e.data!==ud){if(typeof zsi.config.getDataURL===ud)return void alert("zsi.config.getDataURL is not defined in AppStart JS.");z.url=zsi.config.getDataURL,z.data=JSON.stringify(e.data),z.type="POST"}else z.url=e.url;t.bind("refresh",function(){zsi.tmr&&clearTimeout(zsi.tmr),zsi.tmr=setTimeout(function(){t.loadTable(e)},1)}),$.ajax(z)}else e.rows.length&&o&&($.each(e.rows,function(){x(this)}),isUD(t.onComplete)||t.onComplete({params:e,data:e}),t.addScrollbar(e));return t},$.fn.markMandatory=function(e){var t,n=this,i=0;for(n.data("mandatories",e),i=0;i<e.groupNames.length;i++)if(e.groupNames[i].names.length!=e.groupTitles[i].titles.length)return alert("Error!, parameters are not equal."),!1;for(var a=function(){l(this)},s=function(){l(this),$(this).on("change keyup blur",function(){$(this).val(),n.find("*[name='"+this.name+"'][type!=hidden]").each(a)})},o=0;o<e.groupNames.length;o++){t=e.groupNames[o].names;for(i=0;i<t.length;i++){if(1==n.find("[name='"+t[i]+"']").toArray().length){var r=this.find("[name='"+t[i]+"']");l(r[0]),r.on("change keyup blur",a)}else n.find("*[name='"+t[i]+"'][type!=hidden]").each(s)}}function l(e){jo=$(e),typeof jo.val()===ud||""===jo.val()?jo.addClass("mandatory"):jo.removeClass("mandatory")}},$.fn.resetDragScroll=function(){var e=$(this),t=e.find(".zoomPanel"),n=e.find("img"),i=Math.min(e.width()/n.width(),e.height()/n.height());t.css({transform:"scale("+i+")"}),e.scrollTop(0).scrollLeft(0)},$.fn.rowColSpan=function(e){var t=this.children("thead"),n=(this.children("tbody"),!!isUD(e.columns)),i=!isUD(e.groupBy),a=i?e.groupBy.columnIndex:null,s=i?e.groupBy.notInclude:null,o=i?e.groupBy.targets:null,r=0;t.find("tr:first-child th").each(function(){var e=$(this).attr("colspan");isUD(e)?r++:r+=parseInt(e,10)});var l=function(e,t){for(var n=[],r=null,l=null,d=null,c=null,u=0;u<e.length;u++){var h=e[u],f=$(h),p=!1;if(i){e:for(var m=0;m<s.length;m++){var v=s[m];if(f.index()===v){p=!0;break e}}f.index()}if(!p&&i){var g=f.parent().find("td")[a].innerText,y=null!==d?d:h,w=n.findIndexes({keyName:"key",value:y});if(l!==g)d=h,n.push({key:h,items:[h]});else{var b=n[w[0]],C=!1;e:for(m=0;m<o.length;m++){v=o[m];if(f.index()===v){C=!0;break e}}C?(d=h,n.push({key:h,items:[h]})):b.items.push(h)}l=g}else{var x=e[u+1],z=!!x&&h.innerText==x.innerText,_=!!r&&h.innerText==r.innerText;if(z||_){y=c;if((null===c||z&&!_)&&(y=h),0===(w=n.findIndexes({keyName:"key",value:y})).length)c=h,n.push({key:h,items:[h]});else(b=n[w[0]]).items.push(h)}else c=null;r=h}}$.each(n,function(e){var n={},i=this.items;n[t]=i.length,$(i[0]).addClass("hasDuplicate").attr(n),$.each(i,function(e){$(this).hasClass("hasDuplicate")||$(this).addClass("toBeRemove")})})};if("row"==e.type)for(var d=0;d<(n?r:e.columns.length);d++){var c=n?d:e.columns[d],u=[];$.each(this.find("tbody > tr"),function(){var e=$(this),t=e.find("td").length,n=r-t;u.push(e.find("td").get(c-n))}),l(u,"rowspan")}"column"==e.type&&$.each(this.find("tr"),function(t){var i=$(this);if(n)l(i.find("td"),"colspan");else{var a=$([]);$.each(e.columns,function(e){a.push(i.find("td")[this])}),l(a,"colspan")}}),this.find(".toBeRemove").remove()},$.fn.serializeExclude=function(e){var t=this.serializeArray(),n="";return $.each(t,function(t,i){-1==$.inArray(i.name.toLowerCase(),e)&&(n+=""==n?i.name+"="+i.value:"&"+i.name+"="+i.value)}),n},$.fn.setEventOnTRClickForSelection=function(e){this.find("tbody  > tr > td:not(:nth-child(1))").each(function(){var e=this.parentNode,t=$(e).css("cursor","pointer").find("input[type='radio'],input[type='checkbox']");this.onclick=function(){"checkbox"===t.attr("type")?t.prop("checked",!t.prop("checked")):t.prop("checked",!0),t.change()}})},$.fn.setCheckEvent=function(e){var t,n=this;if(0!==n.length){if(t=typeof e!==ud?$(e):this.parent().parent().parent().parent().find("input[name='cb']"),this.prop("checked",!1),n.change(function(){this.checked?t.prop("checked",!0).change():t.prop("checked",!1).change()}),t.length>0){var i=function(){var e=0;t.each(function(){this.checked||e++}),0===e&&n.prop("checked",!0)};t.change(function(){!1===this.checked?n.prop("checked",!1):i()}),i()}}else console.log(n.selector+" not found.")},$.fn.setCloseModalConfirm=function(){var e=$._data(this.get(0),"events");typeof e!==ud&&typeof e.hide!==ud||this.on("hide.bs.modal",function(e){return!("INPUT"===e.target.tagName.toUpperCase()||!confirm("You are about to close this window. Continue?"))})},$.fn.setIdIfChecked=function(e,t){$(this).find("input[name='cb']").change(function(){var n=this.parentNode,i=$(n).find("#"+t);this.checked?i.val(e):i.val("")})},$.fn.setUniqueOptions=function(){var e=[],t=this,n=$(t).children("option"),i=function(e,t){for(var n=!1,i=0;i<t.length;i++)if(t[i].value==e.value){n=!0;break}!1===n&&t.push({value:e.value,text:e.text})},a=function(){return selectedData=[],t.each(function(){""!==this.value&&i({value:this.value,text:this.options[this.selectedIndex].text},selectedData)}),selectedData},s=function(n){for(var a=[],s=0;s<e.length;s++){for(var o=!1,r=0;r<n.length;r++)if(e[s].value===n[r].value){o=!0;break}!1===o&&i(e[s],a)}t.each(function(){var e=this;if(""===this.value)$(this).clearSelect(),this.add(new Option("",""),null),$.each(a,function(){var t=new Option(unescape(this.text),this.value);e.add(t,null)});else{var t={value:this.value,text:this.options[this.selectedIndex].text};$(this).clearSelect(),e.add(new Option("",""),null),e.add(new Option(t.text,t.value),null),$.each(a,function(){var t=new Option(unescape(this.text),this.value);e.add(t,null)}),$(this).val(t.value)}})};function o(){var e=a();s(e)}return n.each(function(){""!==this.value&&e.push({value:this.value,text:this.innerHTML})}),this.change(function(){o()}),o(),this},$.fn.showAlert=function(e){var t=this,n=1500;t.show(),isUD(e)||(e.top&&t.css({left:e.left,top:e.top}),e.center&&t.center(),e.time&&(n=e.time)),setTimeout(function(){t.hide("slow"),isUD(e.onHide)||e.onHide()},n)},$.fn.showPopup=function(e){var t;isUD(e.id)?(t=this.data("ctr")+1||1,this.data("ctr",t)):t=e.id;var n="popup"+t,i="#"+n;return this.find(i).remove(),this.append('<div id="'+n+'" class="zPopup overlay" style="width:'+e.width+";height:"+e.height+'"><div class="panel"><div class="header"><h2>'+(e.title?e.title:"")+'</h2><a class="close" href="javascript:void(0);" id="close">&times;</a></div><div class="content"><div class="body">'+e.body+"</div></div></div></div>"),$p=this.find(i),isUD(e.isAddCover)||!0!==e.isAddCover||$p.addCover(),$p.css({visibility:"visible",opacity:1,"z-index":zsi.getHighestZindex()+1}),$p.find("#close").click(function(t){$(this).closest(".zPopup").remove(),typeof e.onClose!==ud&&e.onClose(this,e)}),this},$.fn.showWaitingBox=function(e){e=e||{};var t=this.attr("id")+"_waitingBox",n=$("body"),i=$("#"+t);$.fn.hideWaitingBox=function(){var e=this.attr("id")+"_waitingBox",t=$("#"+e);t.length>0&&t.hide()};var a=this.get(0).getBoundingClientRect();if(i.length>0)i.show();else{var s=(new zsi.easyJsTemplateWriter).div({id:t,class:"waitingBox",style:"display:block;line-height:"+(e.height?e.height:a.height)+"px;height:"+(e.height?e.height:a.height)+"px;width:"+(e.width?e.width:a.width)+"px;top:"+(e.top?e.top:a.top)+"px;left:"+(e.left?e.left:a.left)+"px;z-index: "+(zsi.getHighestZindex()+1)}).in().div({class:"label"}).in().div({class:"img"}).div({class:"text",value:e.text?e.text:"loading..."}).html();i=$(s),n.append(i)}},$.fn.toJSON=function(e){typeof e===ud&&(e={});var t=function(e,t){return typeof e.optionalItems!==ud&&-1!==e.optionalItems.indexOf(t)},n=function(e){var t=[];alert("insufficient parameters."),$.each(e,function(){t.isExists({keyName:"name",value:this.name})||t.push({name:this.name})}),console.log("parameters found: "+t.length),$.each(t,function(){var t=e.findIndexes({keyName:"name",value:this.name});console.log(this.name+":"+t.length)})},i=e.notInclude||"";if(Array.isArray(e.notIncludes))for(var a=0;a<e.notIncludes.length;a++)""!==i&&(i+=","),i+="[name='"+e.notIncludes[a]+"']";var s=this.find("input, textarea, select").not(":checkbox").not(i).serializeArray(),o=[],r=[];for(a=0;a<s.length;a++)-1==r.indexOf(s[a].name)&&r.push(s[a].name);for(a=0;a<s.length;a++){for(var l={},d=[],c=0;c<r.length;c++){typeof s[a+c]===ud&&n(s);var u=s[a+c].name;l[u]=s[a+c].value||null,t(e,u)||d.push(""===s[a+c].value)}for(var h=0,f=0;f<d.length;f++)d[f]&&h++;h!==d.length&&o.push(l),a+=r.length-1}return typeof e.procedure!==ud&&(o={procedure:e.procedure,rows:o}),typeof e.sqlCode!==ud&&(o={sqlCode:e.sqlCode,rows:o}),o},$.fn.toJSON2=function(e){typeof e===ud&&(e={});var t=function(e,t){return typeof e.optionalItems!==ud&&-1!==e.optionalItems.indexOf(t)},n=[],i=this;$.each(this.find(".right .zRow"),function(t){var a=$(this),s=i.find(".left .zRow:eq("+t+")"),o=e.notInclude||"";if(Array.isArray(e.notIncludes))for(var r=0;r<e.notIncludes.length;r++)""!==o&&(o+=","),o+="[name='"+e.notIncludes[r]+"']";var l=s.find("input, textarea, select").not(":checkbox").not(o).serializeArray(),d=a.find("input, textarea, select").not(":checkbox").not(o).serializeArray(),c={};$.each(l,function(){c[this.name]=""===this.value?null:this.value}),$.each(d,function(){c[this.name]=""===this.value?null:this.value}),Object.keys(c).length>0&&n.push(c)});var a=Object.keys(n[0]),s=Object.keys(n[n.length-1]);if(a.length!==s.length){var o=[],r=[];console.log("Count Properties( Upper Bound Rows = "+a.length+" : Lower Bound Rows = "+s.length+")");for(var l=0;l<s.length;l++)a.indexOf(s[l])<0&&r.push(s[l]);for(l=0;l<a.length;l++)s.indexOf(a[l])<0&&o.push(a[l]);r.length>0&&console.log({notExistInRows:r}),o.length>0&&console.log({notExistInBlankRows:o})}var d=Object.keys(n[0]),c=[];return $.each(n,function(){for(var n=0,i=0;i<d.length;i++)t(e,d[i])||null!==this[d[i]]&&""!==this[d[i]]||(n+=1);n!==d.length-(typeof e.optionalItems!==ud?e.optionalItems.length:0)&&c.push(this)}),n=c,typeof e.procedure!==ud&&(n={procedure:e.procedure,rows:n}),typeof e.sqlCode!==ud&&(n={sqlCode:e.sqlCode,rows:n}),typeof e.parentId!==ud&&(n.parentId=e.parentId),n}},__setPrototypes:function(){String.prototype.isValidDate=function(){return isValidDate(this)},String.prototype.toShortDates=function(){return this.split(" ")[0]},String.prototype.toShortDate=function(){if(!isValidDate(this))return"";var e=new Date(Date.parse(this)),t=e.getMonth()+1+"",n=e.getDate()+"";return(t=1==t.length?"0"+t:t)+"/"+(n=1==n.length?"0"+n:n)+"/"+e.getFullYear()},String.prototype.toShortDateTime=function(){if(!isValidDate(this))return"";var e=new Date(Date.parse(this)),t=e.getHours(),n=e.getMinutes(),i=t>=12?"PM":"AM",a=(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+i;return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+a},String.prototype.toDateFormat=function(){return this.toShortDate()},String.prototype.toMDateTimeFormat=function(){var e=Date.parse(this);if(!1!==isNaN(e))return"";var t=new Date(e),n=function(e){return e>9?""+e:"0"+e};return this.toShortDate()+" "+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())},String.prototype.toMoney=function(){var e="";return!1===isNaN(this)&&(e=parseFloat(this).toMoney()),e},String.prototype.toJSON=function(){var e=null;return""!==this&&(e=$.parseJSON(this)),e},String.prototype.nl2br=function(){return this.replace(/\n/g,"<br />")},Array.prototype.createNewCopy=function(){return $.extend(!0,{},this)},Array.prototype.findIndexes=function(e){var t=[];return $.each(this,function(n){if(this[e.keyName]===e.value)return t.push(n),!0}),t},Array.prototype.groupBy=function(e){var t=[];return $.each(this,function(){var n=this,i="";$.each(e,function(){""!==i&&(i+="_"),i+=n[this]}),function(e,n){var i=null;if($.each(t,function(){if(this.name===e)return i=this,!1}),i)i.items.push(n);else{var a={name:e,items:[]};a.items.push(n),t.push(a)}}(i,this)}),t},Array.prototype.getUniqueRows=function(e){var t=[];return $.each(this.groupBy(e),function(){t.push(this.items[0])}),t},Array.prototype.isExists=function(e){var t=!1;return $.each(this,function(){if(this[e.keyName]===e.value)return t=!0,!1}),t},Array.prototype.removeAttr=function(e){$.each(this,function(){delete this[e]})},Array.prototype.setParamKeys=function(e){var t={};if(this.length>0)for(var n=0;n<e.length;n++)this[n]&&(t[e[n]]=this[n]);return t},Number.prototype.toMoney=function(){return this.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},bs:{ctrl:function(e){var t,n,i,a,s="input",o=typeof e.id!==ud?'" id="'+e.id+'"':"",r=' name="'+e.name+'"'+o,l=' type="text"',d=' class="form-control '+(typeof e.class!==ud?e.class:"")+'" ',c="",u="",h="",f="",p="",m=typeof e.style===ud?"":' style="'+e.style+'"';if(typeof e.value!==ud&&(u=' value="'+e.value+'"'),typeof e.checked!==ud&&e.checked&&(p=" checked "),typeof e.type!==ud){var v=e.type.toLowerCase();if("yesno"==v)return n="N",i="",a='class="form-control"',typeof(t=e).class!==ud&&(a='class="'+t.class+'"'),i+="<select "+r+" "+a+">",typeof t.value!==ud&&(n=t.value),typeof t.mandatory!==ud&&"n"==t.mandatory.toLowerCase()&&(i+='<option value=""></option>'),i+="<option "+("Y"==n?"selected":"")+' value="Y">Yes</option>',i+="<option "+("N"==n||""==n?"selected":"")+' value="N">No</option>',i+="</select>";if("ddl"==v)return"<input type='hidden' "+r+" "+u+"><span id='text'>"+e.displayText+"</span> <div class='zDdlBtn' ><span class='caret'></span></div>";l=' type="'+e.type+'"',"hidden"==v&&(d=""),"hidden"!=v&&"input"!=v&&"checkbox"!=v&&"password"!=v&&"email"!=v&&"radio"!=v&&"time"!=v&&"date"!=v&&(s=v),"select"==v||"textarea"==v?(l="",c="</"+s+">","select"==v&&(h="<option></option>",typeof e.value!==ud&&(u="",f=""!==e.value?" selectedvalue='"+e.value+"'":"")),"textarea"==e.type&&typeof e.value!==ud&&(u="",h=e.value)):"input"==v&&(l=' type="text"')}return"<"+s+r+l+p+d+u+f+m+">"+h+c},button:function(e){var t="",n=' class="btn btn-primary btn-sm"',i=' type="button"',a="";switch(typeof e.type!==ud&&(i=' type="'+e.type+'"'),typeof e.class!==ud&&(n=' class="'+e.class+'"'),typeof e.onclick!==ud&&(a=' onclick="'+e.onclick+'"'),e.name.toLowerCase()){case"search":t="search";break;case"add":case"new":t="plus-sign";break;case"delete":t="trash";break;case"close":t="off";break;case"save":t="floppy-disk";break;case"reset":t="retweet";break;case"login":t="log-in"}var s='<span class="glyphicon glyphicon-'+t+'"></span>';return'<button id="btn'+e.name+'" '+n+i+a+">"+s+" "+e.text+"</button>"}},collectData:function(e){$.ajax({method:"POST",url:zsi.config.getDataURL,data:JSON.stringify(e),dataType:"json",success:e.onComplete})},config:{},form:{__checkMandatory:function(e,t,n){var i,a=e.names,s=t.titles,o=[];zsi.form.__objMandatoryGroupIndexValues[n]="N";for(var r=0;r<a.length;r++){if((c=document.getElementsByName(a[r])).length>1)for(var l=0,d=0;d<c.length;d++)"hidden"!=c[d].type&&(i||(i=c[d]),""!==$.trim(c[d].value)&&(o[l]=d,l++,zsi.form.__objMandatoryGroupIndexValues[n]="Y"));else if(c[0]&&(c[0].value===ud||""===$.trim(c[0].value)))return c[0].focus(),alert("Enter "+s[r]+"."),!1}if("M"==e.type){if(e.required_one&&"Y"==e.required_one&&0===o.length)return alert("Please enter at least 1 record."),i&&i.focus(),!1;for(r=0;r<a.length;r++){var c;if((c=document.getElementsByName(a[r])).length>1)for(d=0;d<o.length;d++)if("hidden"!=c[o[d]].type&&""===$.trim(c[o[d]].value))return c[o[d]].focus(),alert("Enter "+s[r]+"."),!1}}return!0},__objMandatory:null,__objMandatoryGroupIndexValues:[],checkNumber:function(e){var t,n,a="";for(i=1;i<arguments.length;i++)a+=arguments[i];if(window.event)t=e.keyCode;else{if(!e.which)return!0;if(8==(t=e.which))return!0;if("91"==String.charCodeAt(t))return!0}return n=String.fromCharCode(t),-1!=a.indexOf(n)||/\d/.test(n)},isValidNumberFormat:function(e){var t=e.value;if(""!==t)return!!/(?=.)^\$?(([1-9][0-9]{0,2}(,[0-9]{3})*)|[0-9]+)?(\.[0-9]{1,4})?$/.test(t)},checkNumberFormat:function(e){zsi.form.isValidNumberFormat(e)||(alert("Please enter a valid number format."),setTimeout(function(){e.focus()},0))},checkMandatory:function(){var e=zsi.form.__objMandatory;if(typeof e===ud)return!0;for(var t=0;t<e.groupNames.length;t++)if(!zsi.form.__checkMandatory(e.groupNames[t],e.groupTitles[t],t))return!1;if(e.required_one_indexes){var n=e.required_one_indexes,i=zsi.form.__objMandatoryGroupIndexValues,a=0;for(t=0;t<n.length;t++)for(var s=0;s<i.length;s++)n[t]==s&&"N"==i[s]&&a++;if(n.length==a)return alert("Please enter at least one record."),!1}return!0},markMandatory:function(e){$("input,select,textarea").not("[type=hidden]").each(function(){}),zsi.form.__objMandatory=e;for(var t=0;t<e.groupNames.length;t++)if(e.groupNames[t].names.length!=e.groupTitles[t].titles.length)return alert("Error!, parameters are not equal."),!1;for(var n,i=0;i<e.groupNames.length;i++){n=e.groupNames[i].names;for(t=0;t<n.length;t++){if(1==document.getElementsByName(n[t]).length){var a=$("[name='"+n[t]+"']");s(a[0]),a.on("change keyup blur",function(){s(this)})}else $("*[name='"+n[t]+"'][type!=hidden]").each(function(){s(this),$(this).on("change keyup blur",function(){$(this).val(),$("*[name='"+this.name+"'][type!=hidden]").each(function(){s(this)})})})}}function s(e){jo=$(e),typeof jo.val()===ud||""===jo.val()?jo.addClass("mandatory"):jo.removeClass("mandatory")}},checkDate:function(e,t){for(var n=0;n<e.length;n++){var i=document.getElementsByName(e[n]);if(i.length>1){for(var a=0;a<i.length;a++)if("hidden"!=i[a].type&&""!=$.trim(i[a].value)&&1!=isValidDate(i[a].value))return alert(t[n]+" must be in [mm/dd/yyyy] format."),i[a].focus(),!1}else if(i[0]&&""!=$.trim(i[0].value)&&1!=isValidDate(i[0].value))return alert(t[n]+" must be in [mm/dd/yyyy] format."),i[0].focus(),!1}return!0},setCriteria:function(e,t,n){var i=$(e);return"SELECT"==i.prop("tagName")?i.find(":selected").text()&&(""!=n&&(n+=", "),n+=t+": "+i.find(":selected").text()):i.val()&&(""!=n&&(n+=", "),n+=t+":"+i.val()),n},showAlert:function(e){var t=$("."+e);t.center(),t.show(),setTimeout(function(){t.hide("slow")},500)},deleteData:function(e){for(var t="",n=zsi.table.getCheckBoxesValues("input[name='cb']:checked"),i=0;i<n.length;i++)""!==t&&(t+="/"),t+=n[i];""!==t&&confirm("Are you sure you want to delete selected items?")&&$.post(base_url+"sql/exec?p=deleteData @pkey_ids='"+t+"',@table_code='"+e.code+"'",function(t){e.onComplete(t)}).fail(function(e){alert("Sorry, the curent transaction is not successfull.")})}},getData:function(){if(typeof zsi.config.getDataURL!==ud){var e,t={dataType:"json",type:"POST",url:zsi.config.getDataURL,cache:!1},n=arguments;"string"==typeof n[0]?(e={sqlCode:n[0]},t.success=n[1]):(e=n[0],t.success=n[0].onComplete),t.data=JSON.stringify(e),$.ajax(t)}else alert("zsi.config.getDataURL is not defined in AppStart JS.")},getHighestZindex:function(){var e="body > *",t=arguments;return typeof t[0]!==ud&&(e=t[0]),Math.max.apply(null,$.map($(e),function(e,t){if("absolute"==$(e).css("position"))return parseInt($(e).css("z-index"))||1}))},getTableLayoutsObjects:function(e,t){var n=function(e){for(var t={},n=Object.keys(e),i=0;i<n.length;i++){var a=n[i];""!==e[a]&&(t[a]=e[a])}return t};$.get(base_url+"sql/proc?p=table_layout_sel @code='"+e+"'",function(e){if(e.rows.length>0){var i=e.rows[0],a=n(i);a.onComplete=new Function("d",a.onComplete),$.get(base_url+"sql/proc?p=table_layout_cols_sel @tableLayoutId='"+a.tableLayoutId+"'",function(e){if(e.rows.length>0){var i=[];$.each(e.rows,function(){this.onRender&&(this.onRender=new Function("d",this.onRender)),i.push(n(this))}),a.dataRows=i,t(a)}else t(null)})}})},getUrlParamValue:function(e){var t=window.location.href;if(e=e.toLowerCase(),t.indexOf("?")>-1){var n=t.split("?")[1];if(n.indexOf("&")>-1)for(var i=n.split("&"),a=0;a<i.length;a++){var s;if((s=i[a].split("="))[0].toLowerCase()==e.toLowerCase())return s[1]}else if((s=n.split("="))[0].toLowerCase()==e.toLowerCase())return s[1]}return""},htmlToExcel:function(e){var t="",n="#frmTmp",i=e.version&&2==e.version?"HtmlToExcel2":"HtmlToExcel";$(n).length>0&&$(n).remove(),t+='<form accept-charset="utf-8" style="display:none;" id="frmTmp" method="post" action="'+base_url+"excel/"+i+'">',t+='<input name ="html" value="'+encodeURI("<html><head><meta charset='utf-8' /><style> table, td {border:thin solid black}table {border-collapse:collapse;font-family:Tahoma;font-size:10pt;}</style></head><body>"+e.html+"</body></html>")+'" >',t+='<input  name="filename" value="'+(e.fileName||"download")+'">',t+="</form>",$("body").append(t),$(n).submit()},init:function(e){zsi.__setPrototypes(),zsi.__setExtendedJqFunctions(),zsi.initURLParameters(),zsi.config=e,zsi.__monitorAjaxResponse(),zsi.initInputTypesAndFormats()},initDatePicker:function(){var e=$("input[id*=date]").not("input[type='hidden']");e.attr("placeholder","mm/dd/yyyy"),e.keyup(function(){2!=this.value.length&&5!=this.value.length||(this.value+="/")}),e.length>0&&e.datepicker({format:"mm/dd/yyyy",autoclose:!0,daysOfWeekDisabled:[0,6]}).on("show",function(e){$(".datepicker").css("z-index",zsi.getHighestZindex()+1)})},initURLParameters:function(){this.urlParam={};for(var e=window.location.search.substr(1).split("&"),t=0;t<e.length;t++){var n=e[t].split("=");this.urlParam[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}},json:{groupByColumnIndex:function(e,t){var n={},i=[];return $.each(e.rows,function(){var e=this.data[t];-1==$.inArray(e,i)&&(i.push(e),n[e]=[]),n[e].push(this.data)}),n}},url:{getQueryValue:function(e,t){e=e.toString().toLowerCase(),t=t.toLowerCase();var n=e.indexOf("?");if(n>-1&&(e=e.substr(n+1)),e.indexOf("&")>-1)for(var i=e.split("&"),a=0;a<i.length;a++){var s;if((s=i[a].split("="))[0]==t)return s[1]}else if((s=e.split("="))[0]==t)return s[1];return""},removeQueryItem:function(e,t){e=e.toString().toLowerCase(),t+="".toLowerCase();var n=e.indexOf("?");n>-1&&(e=e.substr(n+1));var i="";if(e.indexOf("&")>-1)for(var a=e.split("&"),s=0;s<a.length;s++){a[s].split("=")[0]!=t&&(i&&(i+="&"),i+=a[s])}return i}},table:{getCheckBoxesValues:function(){var e,t=arguments,n=null;switch(t.length){case 1:var i=[],a=0;e=t[0],$(e).each(function(){i[a]=$(this.parentNode).children("input[type=hidden]").val(),a++}),n=i;break;case 3:var s="";e=t[0];var o=t[1],r=t[2];$(e).each(function(){var e=$(this.parentNode).children("input[type=hidden]").val();e==ud&&(e=this.value),""!==s&&(s+=r),s=s+o+e}),n=s}return n},setCheckBox:function(e,t){var n=$(e.parentNode).children("input[type=hidden]");"hidden"==n.attr("type")?e.checked?n.val(t):n.val(""):alert("input[type=hidden] not found")}},tmr:null,toDate:function(e){return e},toggleExtraRow:function(e){e.parentId=zsi.replaceIllegalId(e.parentId);var t=$(e.object).find("span"),n=$("#childPanel"+e.parentId);n.toggle(500,function(){n.is(":visible")?t.removeClass("fas fa-caret-circle-down").addClass("fas fa-caret-circle-up"):t.removeClass("fas fa-caret-circle-up").addClass("fas fa-caret-circle-down")}),n.hasClass("loaded")||(n.addClass("loaded"),isUD(e.onLoad)||e.onLoad($("#childPanel"+e.parentId+" .zGrid")))},replaceIllegalId:function(e){return"number"==typeof e?e:e.replace(/^[^a-z]+|[^\w:.-]+/gi,"__")},setValIfNull:function(e,t,n){var i=typeof n!==ud?n:"";return e&&typeof e[t]!==ud?e[t]:i},ShowHideProgressWindow:function(e){var t=$(".progressWindow");e?(t.centerWidth(),t.css("display","block")):t.hide()},ShowErrorWindow:function(){var e=$(".errorWindow");e.centerWidth(),e.css("display","block"),e.css("z-index",zsi.getHighestZindex()+1),setTimeout(function(){e.hide("slow")},5e3)},initInputTypesAndFormats:function(){$(".numeric").keypress(function(e){return zsi.form.checkNumber(e,".,")}),$(".format-decimal").blur(function(){zsi.form.checkNumberFormat(this)})},strExist:function(e,t){var n=!1;return e.toLowerCase().indexOf(t.toLowerCase())>-1&&(n=!0),n}},isValidDate=function(e){var t=Date.parse(e);return!1===isNaN(t)};